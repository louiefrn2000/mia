<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Secret Love Letter</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- üåø Romantic Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --sage-500: #9caf88;
        --sage-200: #dbe9d6;
        --bg: #f6fbf6;
        --accent: #fce8ef;
      }

      body {
        font-family: "Poppins", sans-serif;
        color: #333;
      }

      h1,
      h2 {
        font-family: "Great Vibes", cursive;
        letter-spacing: 0.5px;
      }

      .hearts {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 0;
      }
      .heart {
        position: absolute;
        bottom: -10%;
        font-size: 18px;
        opacity: 0.9;
        transform: translateY(0) scale(1);
        animation: rise var(--d, 8s) linear infinite;
        user-select: none;
      }
      @keyframes rise {
        0% {
          transform: translateY(0) scale(0.8);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        100% {
          transform: translateY(-120vh) scale(1.2);
          opacity: 0;
        }
      }

      @keyframes shakeX {
        10%,
        90% {
          transform: translateX(-1px);
        }
        20%,
        80% {
          transform: translateX(2px);
        }
        30%,
        50%,
        70% {
          transform: translateX(-4px);
        }
        40%,
        60% {
          transform: translateX(4px);
        }
      }
      .shake {
        animation: shakeX 600ms cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
      }

      .paper {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.95),
          rgba(255, 255, 255, 0.9)
        );
        border: 1px solid rgba(156, 175, 136, 0.12);
        box-shadow: 0 10px 30px rgba(24, 24, 24, 0.06);
        border-radius: 14px;
        backdrop-filter: blur(4px);
        position: relative;
        z-index: 1;
      }

      #letterContent {
        font-family: "Poppins", sans-serif;
        line-height: 1.8;
        font-size: 1rem;
      }

      em {
        font-family: "Great Vibes", cursive;
        font-size: 1.3rem;
        color: var(--sage-500);
      }
    </style>
  </head>

  <body
    class="min-h-screen flex items-center justify-center px-4 sm:px-6 md:px-8"
    style="background: linear-gradient(180deg, var(--bg), #ffffff)"
  >
    <div class="hearts" aria-hidden="true"></div>

    <main class="w-full max-w-md sm:max-w-lg md:max-w-2xl">
      <div class="paper p-6 sm:p-8">
        <div
          class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 text-center sm:text-left"
        >
          <h1
            class="text-3xl sm:text-4xl font-bold mb-2 sm:mb-0"
            style="color: var(--sage-500)"
          >
            Happy 3rd Monthsarry, Darling!
          </h1>
        </div>

        <!-- Password Section -->
        <section id="passwordSection" class="mb-6">
          <label
            for="pwd"
            class="block text-sm font-medium text-gray-700 mb-2 text-center sm:text-left"
          >
            What's the password?
          </label>
          <div
            class="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center"
          >
            <input
              id="pwd"
              type="password"
              inputmode="numeric"
              maxlength="6"
              autocomplete="off"
              class="flex-1 px-4 py-3 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-[var(--sage-500)] focus:ring-opacity-60"
              placeholder="Enter 6-digit code"
            />
            <button
              id="openBtn"
              class="px-5 py-3 rounded-lg text-sm font-semibold w-full sm:w-auto"
              style="background: var(--sage-500); color: white"
            >
              Open
            </button>
          </div>
          <p
            id="hint"
            class="mt-2 text-xs text-gray-500 text-center sm:text-left italic"
          >
            Tip: the password is six digits (try a special date... üíö)
          </p>
        </section>

        <!-- Love Letter Section -->
        <section
          id="letterSection"
          class="hidden transition-opacity duration-700 ease-out"
        >
          <div
            class="p-4 sm:p-6 rounded-md"
            style="
              background: linear-gradient(180deg, var(--accent), #fff);
              border: 1px solid rgba(156, 175, 136, 0.06);
            "
          >
            <div
              id="letterContent"
              class="text-gray-700 leading-relaxed text-sm sm:text-base"
              aria-live="polite"
            ></div>
          </div>
        </section>
      </div>

      <footer
        class="mt-6 text-center text-[10px] sm:text-xs text-gray-400 italic"
      ></footer>
    </main>

    <!-- Hidden YouTube Player -->
    <div id="player" style="display: none"></div>

    <script>
      // Load YouTube IFrame API
      var tag = document.createElement("script");
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName("script")[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player("player", {
          height: "0",
          width: "0",
          videoId: "BkZzr7Je8-Y", // Celeste by Tothapi
          playerVars: {
            autoplay: 1,
            loop: 1,
            playlist: "BkZzr7Je8-Y", // kailangan same video ID para mag-loop
            controls: 0,
            modestbranding: 1,
            rel: 0,
            mute: 0,
          },
          events: {
            onReady: function (event) {
              // hindi agad magp-play, hihintayin natin ang password
            },
          },
        });
      }

      // Trigger play after correct password
      function playYTMusic() {
        if (player && player.playVideo) {
          player.playVideo();
        }
      }

      // Sa iyong tryOpen() function:
      function tryOpen() {
        const val = (pwdInput.value || "").trim();
        if (val === CORRECT) {
          document.getElementById("passwordSection").style.display = "none";
          revealLetter();
          playYTMusic(); // simulan ang YouTube music
        } else {
          wrongFeedback();
        }
        pwdInput.value = "";
      }

      const CORRECT = "070725";
      const pwdInput = document.getElementById("pwd");
      const openBtn = document.getElementById("openBtn");
      const letterSection = document.getElementById("letterSection");
      const letterContent = document.getElementById("letterContent");
      const heartsLayer = document.querySelector(".hearts");

      function spawnHearts(count = 8) {
        const chars = ["‚ù§", "üíï", "üíñ", "üíò", "‚ù£Ô∏è"];
        for (let i = 0; i < count; i++) {
          const s = document.createElement("div");
          s.className = "heart";
          s.style.left = Math.random() * 100 + "%";
          s.style.fontSize = 12 + Math.random() * 24 + "px";
          s.style.setProperty("--d", 8 + Math.random() * 6 + "s");
          s.style.opacity = 0.7 * Math.random();
          s.textContent = chars[Math.floor(Math.random() * chars.length)];
          heartsLayer.appendChild(s);
        }
      }
      spawnHearts(8);

      const LOVE_LETTER = `
My dearest Mia, my Mahal, my Darling,<br><br>

Sa tatlong buwang kay bilis lumipas,<br>
Pag-ibig natin, tila‚Äôy di kumukupas.<br>
Madalas mang magtalo, magtampuhan paminsan,<br>
Sa dulo‚Äôy lambingan, halakhak, at asaran.<br><br>

Lagi, sa dapithapon na payapang dumaratal,<br>
Boses mong musika sa araw kong banal.<br>
Sa bawat tampo‚Äôt pagdaramdam na dumadalaw,<br>
Isang ‚ÄúMahal kita‚Äù lang muling naglalaho ang alingawngaw.<br><br>

Nangako akong ikaw ay dadalhin sa altar,<br>
Iibigin ka nang lampas sa hangganang mortal.<br>
Sa‚Äôyo ko natutunang mangarap nang gising,<br>
Habang buhay, ikaw ang dahilan ng aking pag-ising.<br><br>

Sa mata ng pag-ibig na kailanma‚Äôy di magmamaliw,<br>
Mamahalin kitang tapat hanggang sa dulo ng langit, aking giliw.<br><br>

Palaging sa‚Äôyo,<br>
<em>‚Äî Whendel Carulasan <3</em><br>
`;

      function revealLetter() {
        letterSection.classList.remove("hidden");
        letterSection.style.opacity = 0;
        setTimeout(() => (letterSection.style.opacity = 1), 40);
        letterContent.innerHTML = "";
        const text = LOVE_LETTER;
        let i = 0;
        const interval = setInterval(() => {
          if (i >= text.length) {
            clearInterval(interval);
            return;
          }
          if (text[i] === "<") {
            const j = text.indexOf(">", i);
            if (j > -1) {
              letterContent.innerHTML += text.slice(i, j + 1);
              i = j + 1;
              return;
            }
          }
          letterContent.innerHTML += text[i];
          i++;
        }, 50);
      }

      function wrongFeedback() {
        pwdInput.classList.add("ring-2", "ring-red-300");
        pwdInput.classList.add("shake");
        setTimeout(() => {
          pwdInput.classList.remove("ring-2", "ring-red-300", "shake");
        }, 700);
      }

      function tryOpen() {
        const val = (pwdInput.value || "").trim();
        if (val === CORRECT) {
          document.getElementById("passwordSection").style.display = "none";
          revealLetter();
        } else {
          wrongFeedback();
        }
        pwdInput.value = "";
      }

      openBtn.addEventListener("click", tryOpen);
      pwdInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") tryOpen();
      });

      window.addEventListener("load", () => pwdInput.focus());
    </script>
  </body>
</html>
